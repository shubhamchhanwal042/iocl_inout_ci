<!-- main gate section -->
<div class="content mx-5 px-5 mt-2">

    <?php // print_r($notifications);die;
    ?>
    <p>
        <span class="h4">TOTAL <span class="fw-bolder">IN </span>COUNT </span>
        <span class="label label-default fs-4 bg-primary">Main Gate</span>
    </p>

    <div class="d-flex flex-lg-row flex-md-row flex-column justify-content-between gap-5">
        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3 pe-3"> -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-danger pe-3">OPERATION</p>
                        <p>
                            <span class="h1 fw-bold text-dark" id="main_opr">
                                0
                            </span>
                        </p>
                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-calendar-days"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <!-- row -->
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-primary">DRIVER</p>
                        <p><span class="h1 fw-bold" id="main_drv">
                                0
                            </span></p>
                    </div>
                    <div class="pt-2 col-3">
                        <span><i class="fa-solid fs-1 fa-person"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-warning pe-3">PROJECT</p>
                        <p><span class="h1 fw-bold" id="main_prj">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2 pe-4">
                        <span><i class="fa-solid fs-1 fa-id-card"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-muted">VISITOR</p>
                        <p><span class="h1 fw-bold" id="main_vis">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-users"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title text-danger fs-4 fw-bolder">TOTAL</p>
                        <p><span class="h1 fw-bold " id="main_total">
                                0
                            </span></p>
                    </div>

                    
                    <div class="col-3 pt-2">
                        <!-- <span><i class="fa-solid fa-calendar-days"></i></span> -->
                    </div>
                </div>
            </div>
        </div>

        
        <!-- </div> -->

    </div>
</div>

<!-- main gate section ends here -->

<div class="content mx-5 px-5 mt-5">
    <p>
        <span class="h4">TOTAL <span class="fw-bolder">IN</span> COUNT</span>
        <span class="label label-default fs-4 bg-danger">License Area</span>
    </p>
    <div class="d-flex flex-lg-row flex-md-row flex-column justify-content-between gap-5">
        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="pe-0">
                        <p class="card-title fs-4 fw-bolder text-danger pe-3">OPERATION</p>
                        <p><span class="h1 fw-bold" id="lic_opr">
                                0
                            </span></p>

                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-calendar-days"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-primary">DRIVER</p>
                        <p><span class="h1 fw-bold" id="lic_drv">
                                0
                            </span></p>
                    </div>

                  


                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-person"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-warning pe-3">PROJECT</p>
                        <p><span class="h1 fw-bold" id="lic_prj">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2 pe-4">
                        <span><i class="fa-solid fs-1 fa-id-card"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-muted">VISITOR</p>
                        <p><span class="h1 fw-bold" id="lic_vis">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-users"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title text-danger fs-4 fw-bolder">TOTAL</p>
                        <p><span class="h1 fw-bold" id="lic_total">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <!-- <span><i class="fa-solid fa-calendar-days"></i></span> -->
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->
    </div>
</div>


<!-- de-license gate section -->
<div class="content mx-5 px-5 mt-5">
    <p>
        <span class="h4">TOTAL <span class="fw-bolder">IN</span> COUNT</span>
        <span class="label label-default fs-4 bg-success">De-License Area</span>
    </p>

    <div class="d-flex flex-lg-row flex-md-row flex-column justify-content-between gap-5">
        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->

        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-danger pe-3">OPERATION</p>
                        <p><span class="h1 fw-bold" id="del_opr">
                                0
                            </span></p>

                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-calendar-days"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-primary">DRIVER</p>
                        <p><span class="h1 fw-bold" id="del_drv">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-person"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-warning pe-3">PROJECT</p>
                        <p><span class="h1 fw-bold" id="del_prj">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2 pe-4">
                        <span><i class="fa-solid fs-1 fa-id-card"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-muted ">VISITOR</p>
                        <p><span class="h1 fw-bold" id="del_vis">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-users"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title text-danger fs-4 fw-bolder">TOTAL</p>
                        <p><span class="h1 fw-bold" id="del_total">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <!-- <span><i class="fa-solid fa-calendar-days"></i></span> -->
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->
    </div>
</div>

<!-- driver main gate section 'drivergate' -->
<div class="content mx-5 px-5 mt-5">
    <p>
        <span class="h4">TOTAL <span class="fw-bolder">IN</span> COUNT</span>
        <span class="label label-default fs-4 bg-warning">Driver Main Gate</span>
    </p>
    <div class="d-flex flex-lg-row flex-md-row flex-column justify-content-between gap-5">

        <!-- <div class="col-lg-5 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->

        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="pe-0">
                        <p class="card-title fs-4 fw-bolder text-danger pe-3">Truck</p>
                        <p><span class="h1 fw-bold" id="drvmain_truck">
                                0
                            </span></p>

                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-truck"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-5 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">

                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-primary">DRIVER</p>
                        <p><span class="h1 fw-bold" id="drvmain_drv">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-person"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                            <div class="card flex-fill">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <div class="">
                                            <p class="card-title text-danger fs-4 fw-bolder">TOTAL</p>
                                            <p><span class="h1 fw-bold" id="drv_total">
                                                    0
                                                </span></p>
                                        </div>
                                        <div class="col-3 pt-2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->
    </div>
</div>

<!-- driver licence gate section 'drivergate' -->
<div class="content mx-5 px-5 mt-5">
    <p>
        <span class="h4">TOTAL <span class="fw-bolder">IN</span> COUNT</span>
        <span class="label label-default fs-4 bg-danger">Driver Licence Gate</span>
    </p>
    <div class="d-flex flex-lg-row flex-md-row flex-column justify-content-between gap-5">

        <!-- <div class="col-lg-5 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->

        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="pe-0">
                        <p class="card-title fs-4 fw-bolder text-danger pe-3">Truck</p>
                        <p><span class="h1 fw-bold" id="drvlic_truck">
                                0
                            </span></p>

                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-truck"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-5 col-md-4 col-sm-6 mb-3"> -->
        <!-- col-sm-2 -->
        <div class="card flex-fill">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div class="">
                        <p class="card-title fs-4 fw-bolder text-primary">DRIVER</p>
                        <p><span class="h1 fw-bold" id="drvlic_drv">
                                0
                            </span></p>
                    </div>
                    <div class="col-3 pt-2">
                        <span><i class="fa-solid fs-1 fa-person"></i></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="col-lg-2 col-md-4 col-sm-6 mb-3">
                            <div class="card flex-fill">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <div class="">
                                            <p class="card-title text-danger fs-4 fw-bolder">TOTAL</p>
                                            <p><span class="h1 fw-bold" id="drv_total">
                                                    0
                                                </span></p>
                                        </div>
                                        <div class="col-3 pt-2">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> -->
    </div>
</div>

<!-- </div> -->
<!--  container-fluid ends here -->
</div>

<script>
    async function fetchDashboardCount() {
        try {
            const response = await fetch('<?php echo base_url('Dashboard/GetDashboardCount') ?>');
            if (response.ok) {
                const result = await response.json();
                if (result.status == 'success') {
                    // Update the UI with the fetched data
                    displayCountData(result.data);

                    // You can update the UI with the fetched data here
                } else {
                    console.error('Error fetching dashboard count:', result.message);
                }
            } else {
                console.error('Error fetching dashboard count:', response.statusText);
            }
        } catch (error) {
            console.error('Error:', error);
        }
    }

    // Call the function to fetch dashboard count
    fetchDashboardCount(); // Call first when the page loads
    setInterval(fetchDashboardCount, 3000); // Call every 5 seconds

    function displayCountData(data) {
        // Update the UI with the fetched data
        document.getElementById('main_opr').textContent = data.mainGate.Operation_count;
        document.getElementById('main_drv').textContent = data.mainGate.Driver_count;
        document.getElementById('main_prj').textContent = data.mainGate.Project_count;
        document.getElementById('main_vis').textContent = data.mainGate.Visitor_count;
        document.getElementById('main_total').textContent = data.mainGate.total_count;

        document.getElementById('lic_opr').textContent = data.licenseGate.Operation_count;
        document.getElementById('lic_drv').textContent = data.licenseGate.Driver_count;
        document.getElementById('lic_prj').textContent = data.licenseGate.Project_count;
        document.getElementById('lic_vis').textContent = data.licenseGate.Visitor_count;
        document.getElementById('lic_total').textContent = data.licenseGate.total_count;

        document.getElementById('del_opr').textContent = data.deLicenseArea.Operation_count;
        document.getElementById('del_drv').textContent = data.deLicenseArea.Driver_count;
        document.getElementById('del_prj').textContent = data.deLicenseArea.Project_count;
        document.getElementById('del_vis').textContent = data.deLicenseArea.Visitor_count;
        document.getElementById('del_total').textContent = data.deLicenseArea.total_count;

        document.getElementById('drvmain_truck').textContent = data.driverMainGate.Truck_count;
        document.getElementById('drvmain_drv').textContent = data.mainGate.Driver_count;

        document.getElementById('drvlic_truck').textContent = data.driverLicenseGate.Truck_count;
        document.getElementById('drvlic_drv').textContent = data.licenseGate.Driver_count;

    }
</script>